---
sidebar_position: 4
---

# üü° –ö–æ–¥ —è–∫ –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è

[–ü—Ä–æ–≥—Ä–∞–º–æ–≤–∞–Ω—ñ –º–æ–≤–Ω—ñ –º–æ–¥–µ–ª—ñ (PAL)](https://reasonwithpal.com)(@gao2022pal) —î —â–µ –æ–¥–Ω–∏–º –ø—Ä–∏–∫–ª–∞–¥–æ–º —Å–∏—Å—Ç–µ–º–∏ MRKL. –û—Ç—Ä–∏–º–∞–≤—à–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è, PAL –º–æ–∂—É—Ç—å **–Ω–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–¥**, —è–∫–∏–π –≤–∏—Ä—ñ—à–∏—Ç—å –π–æ–≥–æ. –ö–æ–¥ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –¥–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. PAL —ñ CoT –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ-—Ä—ñ–∑–Ω–æ–º—É; –ø—Ä–æ–º—ñ–∂–Ω–∏–º –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è–º PAL —î –∫–æ–¥, —Ç–æ–¥—ñ —è–∫ —É CoT ‚Äî –ø—Ä–∏—Ä–æ–¥–Ω–∞ –º–æ–≤–∞.

import image from '@site/docs/assets/advanced/pal.png';

<div style={{textAlign: 'center'}}>
  <img src={image} style={{width: "500px"}} />
</div>

<div style={{textAlign: 'center'}}>
–ü—Ä–∏–∫–ª–∞–¥ PAL (Gao —Ç–∞ —ñ–Ω.)
</div>

–í–∞–∂–ª–∏–≤–æ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ PAL –ø–æ—î–¥–Ω—É—î –ø—Ä–∏—Ä–æ–¥–Ω—É –º–æ–≤—É (NL - natural language) —ñ –∫–æ–¥. –ù–∞ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –≤–∏—â–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º –ø–æ–∫–∞–∑–∞–Ω–æ –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∏—Ä–æ–¥–Ω–æ—é –º–æ–≤–æ—é, —è–∫—ñ —Å—Ç–≤–æ—Ä—é—î PAL. –•–æ—á–∞ —Ç—É—Ç —Ü—å–æ–≥–æ —ñ –Ω–µ –≤–∏–¥–Ω–æ, –ø—Ä–æ—Ç–µ PAL –≥–µ–Ω–µ—Ä—É—î '\#' –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º —Ä—è–¥–∫–æ–º –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∏—Ä–æ–¥–Ω–æ—é –º–æ–≤–æ—é, —Ç–∞–∫ —â–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç—É—î —ó—Ö —è–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.

## –ù–∞–ø—Ä–∏–∫–ª–∞–¥

–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ—ó –∑–∞–¥–∞—á—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é PAL. –ú–∞—é –∑–∞–ø–∏—Ç –∑ —Ç—Ä—å–æ—Ö –ø–∏—Ç–∞–Ω—å, —â–æ —î —Å–ø—Ä–æ—â–µ–Ω–æ—é –≤–µ—Ä—Å—ñ—î—é [—Ü—å–æ–≥–æ](https://github.com/reasoning-machines/pal/blob/main/pal/prompt/math_prompts.py)(@gao2022pal).

–î–ª—è —Ü—å–æ–≥–æ —è –±—É–¥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ langchain, –ø–∞–∫–µ—Ç Python –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è –≤ –ª–∞–Ω—Ü—é–≥ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –í–úM. –ü–æ-–ø–µ—Ä—à–µ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å:

```python
!pip install langchain==0.0.26
!pip install openai
from langchain.llms import OpenAI
import os
os.environ["OPENAI_API_KEY"] = "sk-YOUR_KEY_HERE"
```

–ü–æ—Ç—ñ–º –º–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é GPT-3 davinci-002 (–∫–æ–ª–∏ —Ü–µ –±—É–¥–µ –∑—Ä–æ–±–ª–µ–Ω–æ, –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –≤–∏–∫–ª–∏–∫ API)
```
llm = OpenAI(model_name='text-davinci-002', temperature=0)
```

–û—Å—å –∫—ñ–ª—å–∫–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –∑–∞–ø–∏—Ç—É:

```python
MATH_PROMPT = '''
Q: –£ —Å–µ—Ä–≤–µ—Ä–Ω—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ –±—É–ª–æ –¥–µ–≤'—è—Ç—å –∫–æ–º–ø'—é—Ç–µ—Ä—ñ–≤. –©–æ–¥–Ω—è, –∑ –ø–æ–Ω–µ–¥—ñ–ª–∫–∞ –ø–æ —á–µ—Ç–≤–µ—Ä, –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–ª–∏ —â–µ –ø–æ –ø‚Äô—è—Ç—å –∫–æ–º–ø‚Äô—é—Ç–µ—Ä—ñ–≤. –°–∫—ñ–ª—å–∫–∏ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä—ñ–≤ –∑–∞—Ä–∞–∑ —É —Å–µ—Ä–≤–µ—Ä–Ω—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ?

# —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞ Python:
"""–£ —Å–µ—Ä–≤–µ—Ä–Ω—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ –±—É–ª–æ –¥–µ–≤'—è—Ç—å –∫–æ–º–ø'—é—Ç–µ—Ä—ñ–≤. –©–æ–¥–Ω—è, –∑ –ø–æ–Ω–µ–¥—ñ–ª–∫–∞ –ø–æ —á–µ—Ç–≤–µ—Ä, –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–ª–∏ —â–µ –ø–æ –ø‚Äô—è—Ç—å –∫–æ–º–ø‚Äô—é—Ç–µ—Ä—ñ–≤. –°–∫—ñ–ª—å–∫–∏ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä—ñ–≤ –∑–∞—Ä–∞–∑ —É —Å–µ—Ä–≤–µ—Ä–Ω—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ?"""
–∫–æ–º–ø'—é—Ç–µ—Ä–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ = 9
–∫–æ–º–ø'—é—Ç–µ—Ä–∏_–≤_–¥–µ–Ω—å = 5
—á–∏—Å–ª–æ_–¥–Ω—ñ–≤ = 4 # 4 –¥–Ω—ñ –º—ñ–∂ –ø–æ–Ω–µ–¥—ñ–ª–∫–æ–º —ñ —á–µ—Ç–≤–µ—Ä–≥–æ–º
–∫–æ–º–ø'—é—Ç–µ—Ä–∏_–¥–æ–¥–∞–Ω—ñ = –∫–æ–º–ø'—é—Ç–µ—Ä–∏_–≤_–¥–µ–Ω—å * —á–∏—Å–ª–æ_–¥–Ω—ñ–≤
–∫–æ–º–ø'—é—Ç–µ—Ä–∏_–≤—Å—å–æ–≥–æ = –∫–æ–º–ø'—é—Ç–µ—Ä–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ + –∫–æ–º–ø'—é—Ç–µ—Ä–∏_–¥–æ–¥–∞–Ω—ñ
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –∫–æ–º–ø'—é—Ç–µ—Ä–∏_–≤—Å—å–æ–≥–æ 
–ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç


Q: –£ –®–æ–Ω–∞ –ø'—è—Ç—å —ñ–≥—Ä–∞—à–æ–∫. –ù–∞ –†—ñ–∑–¥–≤–æ –≤—ñ–Ω –æ—Ç—Ä–∏–º–∞–≤ –≤—ñ–¥ –º–∞–º–∏ –π —Ç–∞—Ç–∞ –ø–æ –¥–≤—ñ —ñ–≥—Ä–∞—à–∫–∏. –°–∫—ñ–ª—å–∫–∏ —É –Ω—å–æ–≥–æ –∑–∞—Ä–∞–∑ —ñ–≥—Ä–∞—à–æ–∫?

# —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞ Python:
"""–£ –®–æ–Ω–∞ –ø'—è—Ç—å —ñ–≥—Ä–∞—à–æ–∫. –ù–∞ –†—ñ–∑–¥–≤–æ –≤—ñ–Ω –æ—Ç—Ä–∏–º–∞–≤ –≤—ñ–¥ –º–∞–º–∏ –π —Ç–∞—Ç–∞ –ø–æ –¥–≤—ñ —ñ–≥—Ä–∞—à–∫–∏. –°–∫—ñ–ª—å–∫–∏ —É –Ω—å–æ–≥–æ –∑–∞—Ä–∞–∑ —ñ–≥—Ä–∞—à–æ–∫?"""
—ñ–≥—Ä–∞—à–∫–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ = 5
—ñ–≥—Ä–∞—à–∫–∏_–º–∞–º–∏ = 2
—ñ–≥—Ä–∞—à–∫–∏_—Ç–∞—Ç–∞ = 2
–≤—Å—å–æ–≥–æ_–æ—Ç—Ä–∏–º–∞–≤ = —ñ–≥—Ä–∞—à–∫–∏_–º–∞–º–∏ + —ñ–≥—Ä–∞—à–∫–∏_—Ç–∞—Ç–∞
–≤—Å—å–æ–≥–æ_—ñ–≥—Ä–∞—à–æ–∫ = —ñ–≥—Ä–∞—à–∫–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ + –≤—Å—å–æ–≥–æ_–æ—Ç—Ä–∏–º–∞–≤
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –≤—Å—å–æ–≥–æ_—ñ–≥—Ä–∞—à–æ–∫ 


Q: –î–∂–µ–π—Å–æ–Ω –º–∞–≤ 20 –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –í—ñ–Ω –¥–∞–≤ –î–µ–Ω–Ω—ñ –¥–µ–∫—ñ–ª—å–∫–∞ –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –¢–µ–ø–µ—Ä —É –î–∂–µ–π—Å–æ–Ω–∞ 12 –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –°–∫—ñ–ª—å–∫–∏ –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤ –î–∂–µ–π—Å–æ–Ω –¥–∞–≤ –î–µ–Ω–Ω—ñ?

# —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞ Python:
"""–£ –î–∂–µ–π—Å–æ–Ω–∞ –±—É–ª–æ 20 –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –í—ñ–Ω –¥–∞–≤ –î–µ–Ω–Ω—ñ –¥–µ–∫—ñ–ª—å–∫–∞ –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –¢–µ–ø–µ—Ä —É –î–∂–µ–π—Å–æ–Ω–∞ 12 –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤. –°–∫—ñ–ª—å–∫–∏ –ª—å–æ–¥—è–Ω–∏–∫—ñ–≤ –î–∂–µ–π—Å–æ–Ω –¥–∞–≤ –î–µ–Ω–Ω—ñ?"""
–¥–∂–µ–π—Å–æ–Ω_–ª—å–æ–¥—è–Ω–∏–∫–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ = 20
–¥–∂–µ–π—Å–æ–Ω_–ª—å–æ–¥—è–Ω–∏–∫–∏_–ø—ñ—Å–ª—è = 12
–¥–µ–Ω–Ω—ñ_–ª—å–æ–¥—è–Ω–∏–∫–∏ = –¥–∂–µ–π—Å–æ–Ω_–ª—å–æ–¥—è–Ω–∏–∫–∏_–ø–æ—á–∞—Ç–∫–æ–≤—ñ - –¥–∂–µ–π—Å–æ–Ω_–ª—å–æ–¥—è–Ω–∏–∫–∏_–ø—ñ—Å–ª—è
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –¥–µ–Ω–Ω—ñ_–ª—å–æ–¥—è–Ω–∏–∫–∏

Q: {question}

# —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞ Python:
'''
```

–¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ GPT-3 –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç.

```
llm_out = llm(MATH_PROMPT.format(question=question))
print(llm_out)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

<pre>
<span className="bluegreen-highlight">
–ï–º–º–∞ –¥–æ–ª–µ—Ç—ñ–ª–∞ –ª—ñ—Ç–∞–∫–æ–º –¥–æ –°—ñ–µ—Ç–ª–∞ –∑–∞ 60 —Ö–≤–∏–ª–∏–Ω. –ü–æ—Ç—ñ–º –≤–æ–Ω–∞ –∑–∞ 2 –≥–æ–¥–∏–Ω–∏ –¥–æ—ó—Ö–∞–ª–∞ –ø–æ—Ç—è–≥–æ–º –¥–æ –ü–æ—Ä—Ç–ª–µ–Ω–¥–∞, –∞ —â–µ –∑–∞ 30 —Ö–≤–∏–ª–∏–Ω –∞–≤—Ç–æ–±—É—Å–æ–º –¥–æ –í–∞–Ω–∫—É–≤–µ—Ä–∞. –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É —ó–π –∑–Ω–∞–¥–æ–±–∏–ª–æ—Å—è, —â–æ–± –¥—ñ—Å—Ç–∞—Ç–∏—Å—è –¥–æ –í–∞–Ω–∫—É–≤–µ—Ä–∞?<br/><br/>

–ø–æ–ª—ñ—Ç_–Ω–∞_–ª—ñ—Ç–∞–∫—É = 60<br/>
–ø–æ—ó–∑–¥–∫–∞_–Ω–∞_–ø–æ—Ç—è–∑—ñ = 2 * 60 # 2 –≥–æ–¥–∏–Ω–∏ –≤ —Ö–≤–∏–ª–∏–Ω–∞—Ö<br/>
–ø–æ—ó–∑–¥–∫–∞_–Ω–∞_–∞–≤—Ç–æ–±—É—Å—ñ = 30<br/>
–∑–∞–≥–∞–ª—å–Ω–∏–π_—á–∞—Å = –ø–æ–ª—ñ—Ç_–Ω–∞_–ª—ñ—Ç–∞–∫—É + –ø–æ—ó–∑–¥–∫–∞_–Ω–∞_–ø–æ—Ç—è–∑—ñ + –ø–æ—ó–∑–¥–∫–∞_–Ω–∞_–∞–≤—Ç–æ–±—É—Å—ñ<br/>
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –∑–∞–≥–∞–ª—å–Ω–∏–π_—á–∞—Å
</span>
</pre>

–ù–∞—Ä–µ—à—Ç—ñ, —Ü–µ–π –∫–æ–¥ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –¥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è Python, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:

```python
exec(llm_out)
print(result)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: **210**, —ñ —Ü–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –±–ª–æ–∫–Ω–æ—Ç Jupyter –¥–ª—è —Ü—å–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É [—Ç—É—Ç](https://github.com/trigaten/Learn_Prompting/tree/main/docs/code_examples/PAL.ipynb).

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–¢–∞–∫–æ–∂ –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [–ø—Ä–∏–∫–ª–∞–¥ PAL's colab ](https://colab.research.google.com/drive/1u4_RsdI0E79PCMDdcPiJUzYhdnjoXeXc?usp=sharing#scrollTo=Ba0ycacK4i1V).