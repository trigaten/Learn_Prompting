---
sidebar_position: 4
---

# üü° –ö–æ–¥ –∫–∞–∫ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ

[Program-aided Language Models (PAL)](https://reasonwithpal.com)(@gao2022pal) - –µ—â–µ –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä —Å–∏—Å—Ç–µ–º—ã MRKL.
–ö–æ–≥–¥–∞ –∏–º –∑–∞–¥–∞—é—Ç –≤–æ–ø—Ä–æ—Å, PAL —Å–ø–æ—Å–æ–±–Ω—ã **–Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥**, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å. –û–Ω–∏ –ø–æ—Å—ã–ª–∞—é—Ç –∫–æ–¥ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—É—é —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. PAL —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç CoT; –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è PAL - —ç—Ç–æ –∫–æ–¥, –∞ CoT - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫. 

import image from '@site/docs/assets/advanced/pal.webp';

<div style={{textAlign: 'center'}}>
  <img src={image} style={{width: "500px"}}/>
</div>

<div style={{textAlign: 'center'}}>
–ü—Ä–∏–º–µ—Ä PAL (Gao –∏ –¥—Ä.)
</div>


–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ PAL —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–¥—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ (NL - natural language) –∏ –∫–æ–¥.
–ù–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –≤—ã—à–µ —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º –≤—ã–¥–µ–ª–µ–Ω—ã —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç PAL. –•–æ—Ç—è —ç—Ç–æ –Ω–µ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏, PAL —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç '\#' –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, —Ç–∞–∫ —á—Ç–æ –æ–Ω–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. 

## –ü—Ä–∏–º–µ—Ä

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è PAL –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞. –Ø –∏—Å–ø–æ–ª—å–∑—É—é –ø—Ä–æ–º—Ç –∏–∑ —Ç—Ä–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π [–≤–æ—Ç —ç—Ç–æ–≥–æ](https://github.com/reasoning-machines/pal/blob/main/pal/prompt/math_prompts.py)(@gao2022pal). 

–î–ª—è —ç—Ç–æ–≥–æ —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å langchain, –ø–∞–∫–µ—Ç Python –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ LLM –≤ —Ü–µ–ø–æ—á–∫—É. –°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–æ–∫:

```python
!pip install langchain==0.0.26
!pip install openai
from langchain.llms import OpenAI
import os
os.environ["OPENAI_API_KEY"] = "sk-YOUR_KEY_HERE"
```

–ó–∞—Ç–µ–º –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é GPT-3 davinci-002 (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–∑–æ–≤ API)
```
llm = OpenAI(model_name='text-davinci-002', temperature=0)
```

–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ–º—Ç–∞:

```python
MATH_PROMPT = '''
Q: –í —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ –±—ã–ª–æ –¥–µ–≤—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å, —Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ –ø–æ —á–µ—Ç–≤–µ—Ä–≥, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–æ—Å—å –µ—â–µ –ø—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –°–∫–æ–ª—å–∫–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π?

# —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ Python:
"""–í —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ –±—ã–ª–æ –¥–µ–≤—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ –ø–æ —á–µ—Ç–≤–µ—Ä–≥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–æ—Å—å –µ—â–µ –ø—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤. –°–∫–æ–ª—å–∫–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ —Å–µ–π—á–∞—Å –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π?"""
–∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–Ω–∞—á–∞–ª—å–Ω—ã–µ = 9
–∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–≤_–¥–µ–Ω—å = 5
—á–∏—Å–ª–æ_–¥–Ω–µ–π = 4 # 4 –¥–Ω—è –º–µ–∂–¥—É –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–æ–º –∏ —á–µ—Ç–≤–µ—Ä–≥–æ–º
–∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–¥–æ–±–∞–≤–ª–µ–Ω—ã = –∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–≤_–¥–µ–Ω—å * —á–∏—Å–ª–æ_–¥–Ω–µ–π
–∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–≤—Å–µ–≥–æ = –∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–Ω–∞—á–∞–ª—å–Ω—ã–µ + –∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –∫–æ–º–ø—å—é—Ç–µ—Ä—ã_–≤—Å–µ–≥–æ
–≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç


Q: –£ –®–æ–Ω–∞ –µ—Å—Ç—å –ø—è—Ç—å –∏–≥—Ä—É—à–µ–∫. –ù–∞ –†–æ–∂–¥–µ—Å—Ç–≤–æ –æ–Ω –ø–æ–ª—É—á–∏–ª –ø–æ –¥–≤–µ –∏–≥—Ä—É—à–∫–∏ –æ—Ç –º–∞–º—ã –∏ –ø–∞–ø—ã. –°–∫–æ–ª—å–∫–æ –∏–≥—Ä—É—à–µ–∫ —É –Ω–µ–≥–æ —Å–µ–π—á–∞—Å?

# —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ Python:
"""–£ –®–æ–Ω–∞ –µ—Å—Ç—å –ø—è—Ç—å –∏–≥—Ä—É—à–µ–∫. –ù–∞ –†–æ–∂–¥–µ—Å—Ç–≤–æ –æ–Ω –ø–æ–ª—É—á–∏–ª –ø–æ –¥–≤–µ –∏–≥—Ä—É—à–∫–∏ –æ—Ç –º–∞–º—ã –∏ –ø–∞–ø—ã. –°–∫–æ–ª—å–∫–æ –∏–≥—Ä—É—à–µ–∫ —É –Ω–µ–≥–æ —Å–µ–π—á–∞—Å?"""
–∏–≥—Ä—É—à–∫–∏_–∏–Ω–∏—Ü–∏–∞–ª—ã = 5
–∏–≥—Ä—É—à–∫–∏_–º–∞–º—ã = 2
–ø–∞–ø–∏–Ω—ã_–∏–≥—Ä—É—à–∫–∏ = 2
–æ–±—â–µ–µ_–ø–æ–ª—É—á–µ–Ω–Ω–æ–µ = –º–∞–º–∞_–∏–≥—Ä—É—à–∫–∏ + –ø–∞–ø–∞_–∏–≥—Ä—É—à–∫–∏
–æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∏–≥—Ä—É—à–µ–∫ = –∏–≥—Ä—É—à–∫–∏_–Ω–∞—á–∞–ª—å–Ω—ã–µ + –æ–±—â–µ–µ_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –≤—Å–µ–≥–æ_–∏–≥—Ä—É—à–µ–∫


Q: –£ –î–∂–µ–π—Å–æ–Ω–∞ –±—ã–ª–æ 20 –ª–µ–¥–µ–Ω—Ü–æ–≤. –û–Ω –¥–∞–ª –î–µ–Ω–Ω–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ–¥–µ–Ω—Ü–æ–≤. –¢–µ–ø–µ—Ä—å —É –î–∂–µ–π—Å–æ–Ω–∞ 12 –ª–µ–¥–µ–Ω—Ü–æ–≤. –°–∫–æ–ª—å–∫–æ –ª–µ–¥–µ–Ω—Ü–æ–≤ –î–∂–µ–π—Å–æ–Ω –æ—Ç–¥–∞–ª –î–µ–Ω–Ω–∏?

# —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ Python:
"""–£ –î–∂–µ–π—Å–æ–Ω–∞ –±—ã–ª–æ 20 –ª–µ–¥–µ–Ω—Ü–æ–≤. –û–Ω –¥–∞–ª –î–µ–Ω–Ω–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ–¥–µ–Ω—Ü–æ–≤. –¢–µ–ø–µ—Ä—å —É –î–∂–µ–π—Å–æ–Ω–∞ 12 –ª–µ–¥–µ–Ω—Ü–æ–≤. –°–∫–æ–ª—å–∫–æ –ª–µ–¥–µ–Ω—Ü–æ–≤ –î–∂–µ–π—Å–æ–Ω –æ—Ç–¥–∞–ª –î–µ–Ω–Ω–∏?""""
–¥–∂–µ–π—Å–æ–Ω_–ª–µ–¥–µ–Ω—Ü—ã_–Ω–∞—á–∞–ª–æ = 20
–¥–∂–µ–π—Å–æ–Ω_–ª–µ–¥–µ–Ω—Ü—ã_–ø–æ—Å–ª–µ = 12 –¥–µ–Ω–Ω–∏_–ª–µ–¥–µ–Ω—Ü—ã = –¥–∂–µ–π—Å–æ–Ω_–ª–µ–¥–µ–Ω—Ü—ã_–Ω–∞—á–∞–ª–æ - –¥–∂–µ–π—Å–æ–Ω_–ª–µ–¥–µ–Ω—Ü—ã_–ø–æ—Å–ª–µ
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –¥–µ–Ω–Ω–∏_–ª–µ–¥–µ–Ω—Ü—ã

Q –≤–æ–ø—Ä–æ—Å: {question}

# —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ Python:
'''
```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º—Ç –≤ GPT-3.

```
llm_out = llm(MATH_PROMPT.format(question=question))
print(llm_out)
```

–í—ã–≤–æ–¥:

<pre>
<span className="bluegreen-highlight">
"""–≠–º–º–∞ —Å–æ–≤–µ—Ä—à–∏–ª–∞ 60-–º–∏–Ω—É—Ç–Ω—ã–π –ø–µ—Ä–µ–ª–µ—Ç –Ω–∞ —Å–∞–º–æ–ª–µ—Ç–µ –≤ –°–∏—ç—Ç–ª. –ó–∞—Ç–µ–º –æ–Ω–∞ –ø—Ä–æ–µ—Ö–∞–ª–∞ 2 —á–∞—Å–∞ –Ω–∞ –ø–æ–µ–∑–¥–µ –¥–æ –ü–æ—Ä—Ç–ª–µ–Ω–¥–∞, –∞ –∑–∞—Ç–µ–º 30 –º–∏–Ω—É—Ç –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ –¥–æ –í–∞–Ω–∫—É–≤–µ—Ä–∞. –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –µ–π –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å, —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –í–∞–Ω–∫—É–≤–µ—Ä–∞?"""<br/>

–ø–æ–ª—ë—Ç_–Ω–∞_—Å–∞–º–æ–ª—ë—Ç–µ = 60<br/>
–ø—Ä–æ–µ–∑–¥_–Ω–∞_–ø–æ–µ–∑–¥–µ = 2 * 60 # 2 —á–∞—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö<br/>
–ø—Ä–æ–µ–∑–¥_–Ω–∞_–∞–≤—Ç–æ–±—É—Å–µ = 30<br/>
–æ–±—â–µ–µ_–≤—Ä–µ–º—è = –ø–æ–ª—ë—Ç_–Ω–∞_—Å–∞–º–æ–ª—ë—Ç–µ + –ø—Ä–æ–µ–∑–¥_–Ω–∞_–ø–æ–µ–∑–¥–µ + –ø—Ä–æ–µ–∑–¥_–Ω–∞_–∞–≤—Ç–æ–±—É—Å–µ<br/>
—Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–±—â–µ–µ_–≤—Ä–µ–º—è
</span>
</pre>

–ù–∞–∫–æ–Ω–µ—Ü, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç:

```python
exec(llm_out)
print(result)
```

–ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è **210**, —á—Ç–æ –≤–µ—Ä–Ω–æ.

–°–º–æ—Ç—Ä–∏—Ç–µ –±–ª–æ–∫–Ω–æ—Ç Jupyter –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ [–∑–¥–µ—Å—å] (https://github.com/trigaten/Learn_Prompting/tree/main/docs/code_examples/PAL.ipynb).

## –ü–æ–¥—Ä–æ–±–Ω–µ–µ

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä [PAL's colab](https://colab.research.google.com/drive/1u4_RsdI0E79PCMDdcPiJUzYhdnjoXeXc?usp=sharing#scrollTo=Ba0ycacK4i1V).